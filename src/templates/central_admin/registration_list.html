{% extends 'base.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'styles/central_admin/registrations_list/style.css' %}">
{% endblock style %}

{% block sidebar %}
{% include 'central_admin/sidebar.html' %}
{% endblock sidebar %}

{% block content %}

<section id="registration-list">
  <div class="section-header">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h2>Registration</h2>
      </div>
      <div>
        <a href="{% url 'central_admin:registration_create' %}" class="btn btn-primary">
          <i class="fa-solid fa-plus me-md-2 me-0"></i><span class="d-none d-md-inline">New registration</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Filter Tabs -->
  <section id="filter-tabs" class="mt-4 mb-3">
    <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link {% if not status_filter %}active{% endif %}" 
           href="{% url 'central_admin:registration_list' %}">
          <i class="fa-solid fa-list me-2"></i>All
          <span class="badge bg-light text-dark ms-1">{{ all_count }}</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if status_filter == 'active' %}active{% endif %}" 
           href="{% url 'central_admin:registration_list' %}?status=active">
          <i class="fa-solid fa-check-circle me-2"></i>Active
          <span class="badge bg-light text-dark ms-1">{{ active_count }}</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if status_filter == 'open' %}active{% endif %}" 
           href="{% url 'central_admin:registration_list' %}?status=open">
          <i class="fa-solid fa-lock-open me-2"></i>Open
          <span class="badge bg-light text-dark ms-1">{{ open_count }}</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if status_filter == 'closed' %}active{% endif %}" 
           href="{% url 'central_admin:registration_list' %}?status=closed">
          <i class="fa-solid fa-lock me-2"></i>Closed
          <span class="badge bg-light text-dark ms-1">{{ closed_count }}</span>
        </a>
      </li>
    </ul>
  </section>

    <div class="wrap">
        {% if registrations %}
        {% for registration in registrations %}
        <div class="card-wrap">
            <div class="card {% if registration.is_active %}border-success{% endif %}">
                <div class="mb-3">
                    <div class="mb-3">
                        <h5 class="card-title">{{registration.name}}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">
                            {% if registration.status %}
                            Open
                            {% else %}
                            Closed
                            {% endif %}
                            {% if registration.is_active %}
                            <span class="badge bg-success ms-2">Active</span>
                            {% endif %}
                        </h6>
                    </div>
                </div>
                <div class="d-flex justify-content-end">
                    <div class="button-block d-flex">
                        <a href="{% url 'central_admin:registration_delete' registration_slug=registration.slug %}" class="btn text-danger btn-sm me-3">Delete<i class="fa-solid fa-trash ms-2"></i></a>
                        <a href="{% url 'central_admin:registration_detail' registration_slug=registration.slug %}" class="btn btn-sm btn-dark">View<i class="fa-solid fa-arrow-right ms-2"></i></a>
                    </div>
                </div> 
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="text-center w-100">
            <span class="text-muted">No registration created yet</span>
        </div>
        {% endif %}
    </div>
</section>
{% endblock content %}